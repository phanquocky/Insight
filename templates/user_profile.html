{% extends 'base.html' %}
{% block content %}

<link rel="stylesheet" href="../static/user_profile.css">

<script>
  function openNewTabWithContent(content) {
    var newWindow = window.open(" ", "_blank");
    newWindow.document.write(content);
  }
</script>

<div class="container justify-content-center">
  <h3 class="">{{user.username}}</h3>

  <ul> 
    <li>Score: {{user.score}}</li>
    <li>Metamask address: {{user.metamask_id}}</li>
  </ul>

  {% if certificates %}
  <table class="container table table-striped mt-3 text-center">
    <thead>
      <tr>
        <th scope="col">#ID</th>
        <th scope="col">Date</th>
        <th scope="col">Old Score</th>
        <th scope="col">New Score</th>
        <th scope="col">Room Data</th>
        <th scope="col">Room Hash</th>
        <th scope="col">Signature</th>
      </tr>
    </thead>

    <tbody class="overflow-auto">
      {% for certificate in certificates %}
      <tr>
        <th scope="row" class="col-1">{{ loop.index }}</th>
        <td class="col-2">{{ certificate.date }}</td>
        <td class="col-2">{{ certificate.old_score }}</td>
        <td class="col-2">{{ certificate.new_score }}</td>
        <td class="col-2"> 
          <button class="btn btn-success" 
             onclick="openNewTabWithContent('{{certificate.room_hash}}')">
             View
          </button>
        </td>
        <td class="col-2"> 
            <button class="btn btn-success" 
                    onclick="openNewTabWithContent('{{certificate.room_hash}}')">
                    View
            </button>
        </td>
        <td class="col-2">
          <button class="btn btn-success"
                  onclick="openNewTabWithContent('{{certificate.signature}}')">
              View
          </button>
        </td>
      </tr>
        {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>

{% endblock %}